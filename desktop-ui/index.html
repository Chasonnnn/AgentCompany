<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AgentCompany Desktop</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="ac-shell">
      <aside class="project-rail">
        <div class="brand-tile">AC</div>
        <button class="rail-item active" data-rail-kind="workspace" id="workspaceRailBtn" type="button">
          Home
        </button>
        <div id="projectRailList" class="rail-list"></div>
        <button class="rail-item rail-add" id="projectAddBtn" type="button" title="Add Project">+</button>
        <div class="rail-spacer"></div>
        <button class="rail-item" id="settingsBtn" type="button" title="Settings">âš™</button>
      </aside>

      <aside class="context-sidebar">
        <header class="sidebar-header">
          <h2 id="scopeTitle">Workspace</h2>
          <p id="scopeSub">Project management and conversations</p>
        </header>

        <section class="sidebar-block">
          <div class="block-title-row">
            <h3>Home</h3>
          </div>
          <button class="sidebar-item active" id="homeViewBtn" data-view-type="home" type="button">Home</button>
        </section>

        <section class="sidebar-block">
          <div class="block-title-row">
            <h3>Channels</h3>
            <button class="mini-btn" id="addChannelBtn" type="button" title="Create Channel">+</button>
          </div>
          <div id="channelList" class="sidebar-list"></div>
        </section>

        <section class="sidebar-block">
          <div class="block-title-row">
            <h3>DMs</h3>
            <button class="mini-btn" id="addDmBtn" type="button" title="New DM">+</button>
          </div>
          <div id="dmList" class="sidebar-list"></div>
        </section>

        <section class="sidebar-block">
          <div class="block-title-row">
            <h3>Views</h3>
          </div>
          <button class="sidebar-item" id="activitiesViewBtn" data-view-type="activities" type="button">
            Activities
          </button>
          <button class="sidebar-item" id="resourcesViewBtn" data-view-type="resources" type="button">
            Resources
          </button>
        </section>
      </aside>

      <section class="content-pane">
        <header class="content-header">
          <div>
            <h1 id="viewTitle">Workspace</h1>
            <p id="viewSubtitle">Concise operations and PM control center</p>
          </div>
          <div class="content-actions">
            <button class="secondary-btn" id="syncBtn" type="button">Refresh</button>
            <button class="secondary-btn" id="liveOpsBtn" type="button">Live Ops</button>
          </div>
        </header>

        <section id="contentBody" class="content-body"></section>

        <form id="composerForm" class="composer hidden">
          <textarea id="composerInput" placeholder="Send a message..." rows="3" maxlength="8000"></textarea>
          <div class="composer-actions">
            <span id="composerHint">Enter to send, Shift+Enter for newline</span>
            <button id="sendBtn" type="submit" class="primary-btn">Send</button>
          </div>
        </form>
      </section>

      <aside class="details-pane">
        <header class="details-header">
          <h2>Participants</h2>
        </header>
        <div id="participantList" class="participant-list"></div>
      </aside>
    </main>

    <dialog id="projectModal">
      <form method="dialog" class="modal-form" id="projectForm">
        <h3>Create Project</h3>
        <label>
          Project Name
          <input id="projectNameInput" type="text" required placeholder="AgentCompany Revamp" />
        </label>
        <label>
          Repo IDs (comma separated)
          <input id="projectReposInput" type="text" placeholder="repo_main,repo_docs" />
        </label>
        <menu>
          <button value="cancel" type="button" id="projectCancelBtn">Cancel</button>
          <button value="default" type="submit">Create</button>
        </menu>
      </form>
    </dialog>

    <dialog id="channelModal">
      <form method="dialog" class="modal-form" id="channelForm">
        <h3>Create Channel</h3>
        <label>
          Name
          <input id="channelNameInput" type="text" required placeholder="Security" />
        </label>
        <label>
          Visibility
          <select id="channelVisibilitySelect">
            <option value="team">Team</option>
            <option value="managers">Managers</option>
            <option value="org">Org</option>
            <option value="private_agent">Private</option>
          </select>
        </label>
        <label>
          Team (optional)
          <select id="channelTeamSelect">
            <option value="">No team binding</option>
          </select>
        </label>
        <div>
          <div class="input-label">Participants</div>
          <div id="channelParticipantList" class="picker-list"></div>
        </div>
        <menu>
          <button value="cancel" type="button" id="channelCancelBtn">Cancel</button>
          <button value="default" type="submit">Create</button>
        </menu>
      </form>
    </dialog>

    <dialog id="dmModal">
      <form method="dialog" class="modal-form" id="dmForm">
        <h3>New Direct Message</h3>
        <label>
          Search
          <input id="dmSearchInput" type="search" placeholder="Search workers by name or role" />
        </label>
        <div id="dmAgentList" class="picker-list"></div>
        <menu>
          <button value="cancel" type="button" id="dmCancelBtn">Cancel</button>
          <button value="default" type="submit">Open DM</button>
        </menu>
      </form>
    </dialog>

    <dialog id="settingsModal">
      <form method="dialog" class="modal-form" id="settingsForm">
        <h3>Workspace Settings</h3>
        <label>
          Workspace Directory
          <input id="workspaceInput" type="text" placeholder="/absolute/path/to/workspace" required />
        </label>
        <label>
          CEO Actor ID
          <input id="actorInput" type="text" value="human_ceo" required />
        </label>
        <div class="inline-actions">
          <button id="bootstrapBtn" type="button">Bootstrap Presets</button>
          <button id="openOnboardBtn" type="button">Onboard Worker</button>
        </div>
        <p id="settingsStatus" class="status-note"></p>
        <menu>
          <button value="cancel" type="button" id="settingsCancelBtn">Close</button>
          <button value="default" type="submit">Save + Refresh</button>
        </menu>
      </form>
    </dialog>

    <dialog id="onboardModal">
      <form method="dialog" class="modal-form" id="onboardForm">
        <h3>Onboard Agent</h3>
        <label>
          Name
          <input id="onboardNameInput" type="text" required placeholder="New Worker" />
        </label>
        <label>
          Role
          <select id="onboardRoleSelect">
            <option value="worker">Worker</option>
            <option value="manager">Manager</option>
          </select>
        </label>
        <label>
          Provider
          <select id="onboardProviderSelect">
            <option value="codex">Codex</option>
            <option value="claude_code">Claude</option>
            <option value="manual">Manual</option>
          </select>
        </label>
        <label>
          Team (optional)
          <select id="onboardTeamSelect">
            <option value="">No team</option>
          </select>
        </label>
        <menu>
          <button value="cancel" type="button" id="onboardCancelBtn">Cancel</button>
          <button value="default" type="submit">Create</button>
        </menu>
      </form>
    </dialog>

    <dialog id="profileModal">
      <form method="dialog" class="modal-form profile-modal" id="profileForm">
        <h3 id="profileName">Agent Profile</h3>
        <p id="profileMeta"></p>
        <div id="profileStats" class="profile-stats"></div>
        <menu>
          <button value="cancel" type="button" id="profileCloseBtn">Close</button>
          <button value="default" type="button" id="profileMessageBtn">Message</button>
        </menu>
      </form>
    </dialog>

    <dialog id="liveOpsModal">
      <form method="dialog" class="modal-form live-modal">
        <h3>Live Ops Surface</h3>
        <p class="status-note">Fallback manager web panel for deep operational workflows.</p>
        <iframe id="liveOpsFrame" title="Live Ops Surface" src="about:blank"></iframe>
        <menu>
          <button value="cancel" type="button" id="liveOpsCloseBtn">Close</button>
        </menu>
      </form>
    </dialog>

    <script src="./app.js" type="module"></script>
  </body>
</html>
