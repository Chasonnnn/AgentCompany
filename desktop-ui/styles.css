:root {
  --bg: #f3f5f8;
  --surface: #ffffff;
  --surface-soft: #f8fafc;
  --line: #dde3ea;
  --text: #0f1725;
  --muted: #5f6e81;
  --accent: #0b66e4;
  --accent-soft: #e8f1ff;
  --success: #167f55;
  --warning: #9f6b0c;
  --danger: #b42318;
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  min-height: 100%;
  color: var(--text);
  font-family: "SF Pro Text", "Sohne", "IBM Plex Sans", -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  background:
    radial-gradient(860px 300px at 3% -24%, #dfe9ff 0%, transparent 60%),
    radial-gradient(820px 250px at 100% -28%, #dff5ef 0%, transparent 55%),
    var(--bg);
}

button,
input,
textarea,
select {
  font: inherit;
}

.ac-shell {
  min-height: 100vh;
  display: grid;
  grid-template-columns: 84px 282px minmax(540px, 1fr) 300px;
}

.project-rail {
  border-right: 1px solid var(--line);
  background: var(--surface);
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  padding: 14px 8px;
}

.brand-tile {
  width: 50px;
  height: 50px;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.94rem;
  letter-spacing: 0.04em;
  color: #063b85;
  border: 1px solid #c8dbff;
  background: linear-gradient(180deg, #f4f8ff 0%, #e9f1ff 100%);
}

.rail-list {
  width: 100%;
  display: grid;
  gap: 8px;
}

.rail-item {
  width: 64px;
  min-height: 36px;
  border-radius: 10px;
  border: 1px solid transparent;
  background: var(--surface-soft);
  color: var(--text);
  font-size: 0.72rem;
  font-weight: 600;
  cursor: pointer;
  padding: 0 4px;
}

.rail-item:hover {
  border-color: #d1d9e3;
}

.rail-item.active {
  border-color: #b9d3ff;
  background: var(--accent-soft);
  color: #154b9e;
}

.rail-item.rail-add {
  font-size: 1.2rem;
  line-height: 1;
}

.rail-spacer {
  flex: 1;
}

.context-sidebar {
  border-right: 1px solid var(--line);
  background: var(--surface);
  padding: 14px 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  overflow: auto;
}

.sidebar-header h2 {
  margin: 0;
  font-size: 1.05rem;
}

.sidebar-header p {
  margin: 4px 0 0;
  color: var(--muted);
  font-size: 0.79rem;
}

.sidebar-block {
  display: grid;
  gap: 6px;
}

.block-title-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.sidebar-block h3 {
  margin: 0;
  color: #6d7f94;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-size: 0.64rem;
}

.mini-btn {
  border: 1px solid #d4dde8;
  background: #f6f8fb;
  color: #38516c;
  border-radius: 7px;
  width: 24px;
  height: 24px;
  cursor: pointer;
}

.sidebar-list {
  display: grid;
  gap: 4px;
}

.sidebar-item {
  width: 100%;
  border: 1px solid transparent;
  background: transparent;
  color: #27364a;
  border-radius: 8px;
  padding: 7px 9px;
  text-align: left;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.sidebar-item:hover {
  background: #f3f7fc;
}

.sidebar-item.active {
  border-color: #c7dcff;
  background: #edf5ff;
  color: #104ea7;
}

.item-badge {
  border-radius: 999px;
  border: 1px solid #d2dbe8;
  background: #fff;
  padding: 0 6px;
  color: #334760;
  font-size: 0.65rem;
}

.content-pane {
  display: grid;
  grid-template-rows: auto 1fr auto;
  min-height: 100vh;
  background: var(--surface-soft);
}

.content-header {
  border-bottom: 1px solid var(--line);
  background: var(--surface);
  padding: 14px 18px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;
}

.content-header h1 {
  margin: 0;
  font-size: 1.22rem;
}

.content-header p {
  margin: 5px 0 0;
  color: var(--muted);
  font-size: 0.8rem;
}

.content-actions {
  display: inline-flex;
  gap: 8px;
}

.secondary-btn,
.primary-btn,
.content-actions button {
  border: 1px solid #cfdae8;
  background: #fff;
  color: #1b2b40;
  border-radius: 8px;
  padding: 7px 11px;
  cursor: pointer;
  font-weight: 600;
}

.primary-btn {
  border-color: #a6c8ff;
  background: #eaf3ff;
  color: #0a4ea5;
}

.content-body {
  overflow: auto;
  padding: 16px 18px;
  display: grid;
  gap: 10px;
  align-content: start;
}

.composer {
  border-top: 1px solid var(--line);
  background: var(--surface);
  padding: 10px 14px;
}

.composer.hidden {
  display: none;
}

.composer textarea {
  width: 100%;
  resize: vertical;
  min-height: 68px;
  border: 1px solid #d4dde8;
  border-radius: 10px;
  background: #fff;
  color: var(--text);
  padding: 10px;
}

.composer-actions {
  margin-top: 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

#composerHint {
  color: var(--muted);
  font-size: 0.72rem;
}

.message-card,
.activity-card,
.resource-card,
.pm-card,
.gantt-card {
  border: 1px solid var(--line);
  background: #fff;
  border-radius: 12px;
  padding: 11px 12px;
}

.message-meta,
.activity-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  color: #6c7e92;
  font-size: 0.72rem;
}

.message-author {
  font-weight: 700;
  color: #1f3046;
}

.message-body {
  margin: 7px 0 0;
  color: #1d2f45;
  white-space: pre-wrap;
}

.activity-title {
  margin: 6px 0 0;
  font-weight: 700;
}

.activity-body {
  margin: 5px 0 0;
  color: #475d74;
}

.resource-grid,
.pm-grid {
  display: grid;
  grid-template-columns: repeat(4, minmax(160px, 1fr));
  gap: 10px;
}

.kpi,
.pm-kpi {
  border: 1px solid var(--line);
  background: #fff;
  border-radius: 12px;
  padding: 10px;
}

.kpi-label,
.pm-kpi .label {
  color: #6b7d91;
  text-transform: uppercase;
  letter-spacing: 0.07em;
  font-size: 0.62rem;
}

.kpi-value,
.pm-kpi .value {
  margin-top: 5px;
  font-size: 1.3rem;
  font-weight: 700;
}

.pm-table,
.recommend-table {
  border: 1px solid var(--line);
  border-radius: 12px;
  overflow: hidden;
  background: #fff;
}

.pm-table table,
.recommend-table table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.86rem;
}

.pm-table th,
.pm-table td,
.recommend-table th,
.recommend-table td {
  border-bottom: 1px solid #eef2f7;
  padding: 8px 10px;
  text-align: left;
}

.pm-table tr:last-child td,
.recommend-table tr:last-child td {
  border-bottom: none;
}

.progress {
  width: 100%;
  height: 8px;
  border-radius: 999px;
  background: #edf1f6;
  overflow: hidden;
}

.progress > span {
  display: block;
  height: 100%;
  background: #6ea8ff;
}

.risk {
  display: inline-flex;
  border: 1px solid #f5d6b0;
  background: #fff7ec;
  color: #8a5a0f;
  border-radius: 999px;
  padding: 1px 7px;
  font-size: 0.66rem;
  font-weight: 600;
}

.gantt-frame {
  border: 1px solid var(--line);
  background: #fff;
  border-radius: 12px;
  padding: 10px;
  display: grid;
  gap: 8px;
}

.gantt-row {
  display: grid;
  grid-template-columns: 220px 1fr 90px;
  gap: 10px;
  align-items: center;
}

.gantt-label {
  font-size: 0.84rem;
}

.gantt-track {
  position: relative;
  height: 16px;
  border-radius: 999px;
  background: #eef3f9;
}

.gantt-bar {
  position: absolute;
  height: 100%;
  border-radius: 999px;
  background: #88b7ff;
}

.gantt-bar.critical {
  background: #ff9f9f;
}

.details-pane {
  border-left: 1px solid var(--line);
  background: var(--surface);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

.details-header {
  border-bottom: 1px solid var(--line);
  padding: 14px 12px;
}

.details-header h2 {
  margin: 0;
  font-size: 0.95rem;
}

.participant-list {
  padding: 10px;
  display: grid;
  gap: 7px;
  overflow: auto;
}

.participant-item {
  border: 1px solid #dbe3ee;
  background: #fff;
  border-radius: 10px;
  padding: 8px;
  cursor: pointer;
  text-align: left;
  color: #1f3046;
}

.participant-item:hover {
  border-color: #c8d7eb;
}

.participant-item .meta {
  margin-top: 4px;
  color: var(--muted);
  font-size: 0.72rem;
}

dialog {
  border: 1px solid #d6deea;
  border-radius: 12px;
  background: #fff;
  color: var(--text);
  width: min(620px, calc(100vw - 20px));
}

dialog::backdrop {
  background: rgba(17, 23, 33, 0.3);
}

.modal-form {
  display: grid;
  gap: 10px;
  padding: 14px;
}

.modal-form h3 {
  margin: 0;
}

.modal-form label {
  display: grid;
  gap: 5px;
  font-size: 0.82rem;
  color: #31455e;
}

.input-label {
  font-size: 0.82rem;
  color: #31455e;
  margin-bottom: 4px;
}

.modal-form input,
.modal-form select,
.modal-form textarea {
  border: 1px solid #d3dce8;
  border-radius: 8px;
  background: #fff;
  color: var(--text);
  padding: 7px 8px;
}

.modal-form menu {
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.modal-form menu button {
  border: 1px solid #cdd8e8;
  background: #fff;
  color: #1f3046;
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
}

.modal-form menu button[type="submit"] {
  border-color: #b6d1ff;
  background: #ecf4ff;
  color: #0f4d9f;
}

.status-note {
  margin: 0;
  color: #5f7187;
  font-size: 0.77rem;
}

.inline-actions {
  display: flex;
  gap: 8px;
}

.inline-actions button {
  border: 1px solid #cfdae8;
  background: #fff;
  color: #1f3046;
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
}

.picker-list {
  max-height: 220px;
  overflow: auto;
  border: 1px solid #d7e0ec;
  border-radius: 10px;
  background: #fff;
  display: grid;
  gap: 0;
}

.picker-option {
  padding: 8px 10px;
  border-bottom: 1px solid #eef2f7;
  display: flex;
  align-items: center;
  gap: 8px;
}

.picker-option:last-child {
  border-bottom: none;
}

.picker-option .meta {
  color: var(--muted);
  font-size: 0.75rem;
}

.profile-stats {
  display: grid;
  grid-template-columns: repeat(2, minmax(140px, 1fr));
  gap: 8px;
}

.profile-stat {
  border: 1px solid #dde4ed;
  border-radius: 10px;
  background: #fff;
  padding: 8px;
}

.profile-stat .k {
  color: #6c7e93;
  font-size: 0.68rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.profile-stat .v {
  margin-top: 4px;
  font-size: 0.95rem;
  font-weight: 700;
}

.live-modal {
  width: min(1240px, calc(100vw - 20px));
}

#liveOpsFrame {
  width: 100%;
  height: min(72vh, 760px);
  border: 1px solid #d5deeb;
  border-radius: 10px;
  background: #fff;
}

.empty {
  color: var(--muted);
  border: 1px dashed #cfd9e6;
  border-radius: 12px;
  padding: 14px;
  text-align: center;
  background: #fff;
}

@media (max-width: 1300px) {
  .ac-shell {
    grid-template-columns: 72px 250px 1fr;
  }

  .details-pane {
    display: none;
  }

  .resource-grid,
  .pm-grid {
    grid-template-columns: repeat(2, minmax(160px, 1fr));
  }

  .gantt-row {
    grid-template-columns: 160px 1fr 80px;
  }
}

@media (max-width: 920px) {
  .ac-shell {
    grid-template-columns: 66px 1fr;
  }

  .context-sidebar {
    display: none;
  }

  .resource-grid,
  .pm-grid {
    grid-template-columns: 1fr;
  }

  .gantt-row {
    grid-template-columns: 120px 1fr 64px;
    gap: 6px;
  }
}
